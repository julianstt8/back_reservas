//Creacion tabla usuarios
CREATE TABLE reservaBoletas.res_usuarios (
	cedula varchar(100) NOT NULL,
	nombre varchar(100) NOT NULL,
	apellido varchar(100) NOT NULL,
	correo varchar(100) NOT NULL,
	fecha_creacion DATETIME NOT NULL,
	tipo_usuario INT NOT NULL,
	contrasena varchar(100) NOT NULL
)
ENGINE=InnoDB
DEFAULT CHARSET=utf8
COLLATE=utf8_general_ci;
ALTER TABLE reservaBoletas.res_usuarios ADD CONSTRAINT res_usuarios_pk PRIMARY KEY (cedula);


//Creacion tabla eventos
CREATE TABLE reservaBoletas.res_eventos (
	id_evento INT auto_increment NOT NULL,
	nombre varchar(100) NOT NULL,
	ciudad varchar(100) NOT NULL,
	direccion varchar(100) NOT NULL,
	horario date NOT NULL,
	artistas varchar(100) NOT NULL,
	CONSTRAINT res_eventos_pk PRIMARY KEY (id_evento)
)
ENGINE=InnoDB
DEFAULT CHARSET=utf8
COLLATE=utf8_general_ci;

//Creacion tabla boletas
CREATE TABLE reservaBoletas.res_boletas (
	id_boleta INT auto_increment NOT NULL,
	id_evento INT NOT NULL,
	cantidad_boletas INT NOT NULL,
	cantidad_boletas_disponibles INT NOT NULL,
	CONSTRAINT res_boletas_pk PRIMARY KEY (id_boleta)
)
ENGINE=InnoDB
DEFAULT CHARSET=utf8
COLLATE=utf8_general_ci;


//Creacion tabla reservacion_usuario
CREATE TABLE reservaBoletas.res_reservacion_usuario (
	id_reservacion INT auto_increment NOT NULL,
	cedula varchar(100) NOT NULL,
	boleta_id INT NOT NULL,
	fecha_reservacion DATETIME NOT NULL,
	estado INT NOT NULL,
	CONSTRAINT res_reservacion_usuario_pk PRIMARY KEY (id_reservacion)
)
ENGINE=InnoDB
DEFAULT CHARSET=utf8
COLLATE=utf8_general_ci;

//LLaves foraneas
ALTER TABLE `reservaboletas`.`res_usuarios` 
ADD CONSTRAINT `FK_usuarios_reservacion`
  FOREIGN KEY (`cedula`)
  REFERENCES `reservaboletas`.`res_reservacion_usuario` (`cedula`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;


ALTER TABLE reservaBoletas.res_reservacion_usuario ADD CONSTRAINT res_reservacion_usuario_FK_1 FOREIGN KEY (boleta_id) REFERENCES reservaBoletas.res_boletas(id_boleta);

ALTER TABLE reservaBoletas.res_boletas ADD CONSTRAINT res_boletas_FK FOREIGN KEY (id_evento) REFERENCES reservaBoletas.res_eventos(id_evento);
